@model Usuarios


@{
    ViewData["Title"] = "Agregar Usuario";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<div class="card">
    <div class="card-header">
        Configuración de la empresa
    </div>
    <!-- /.card-header -->
    <div class="card-body" ng-controller="myCtrl">

        <form asp-action="GuardarCambios" asp-controller="Usuarios" method="post" class="needs-validation" novalidate>

            <input asp-for="idUsuario" type="hidden" />

            <div class="row">

                <div class="col-md-6 form-group">
                    <label class="form-label" for="Usuario">Nombre de la empresa</label>
                    <input type="text" class="form-control form-control-sa" asp-for="Usuario" name="Usuario" id="Usuario" required />
                    <div class="valid-feedback">Válido.</div>
                    <div class="invalid-feedback">Por favor rellene este campo.</div>
                </div>




                <div class="col-md-6 form-group">
                    <label class="form-label" for="email">Email</label>
                    <input type="email" class="form-control form-control-sa" asp-for="Email" id="email" name="email" required />
                    <div class="valid-feedback">Válido.</div>
                    <div class="invalid-feedback">Ingrese un correo electrónico.</div>
                </div>


                <div class="col-md-4 form-group">
                    <label class="form-label" for="Direccion">Direccion</label>
                    <input type="text" class="form-control form-control-sa" asp-for="Direccion" id="direccion" name="direccion" required />
                    <div class="valid-feedback">Válido.</div>
                    <div class="invalid-feedback">Ingrese una Dirección.</div>
                </div>



                <div class="col-md-4 form-group">
                    <label class="form-label" for="Telefono">Teléfono</label>
                    <input type="tel" class="form-control form-control-sa" data-inputmask='"mask": "(999) 999-9999"' data-mask asp-for="Telefono" id="telefono" name="telefono" required />
                    <div class="valid-feedback">Válido.</div>
                    <div class="invalid-feedback">Ingrese un numero Telefónico.</div>
                </div>


                <div class="col-md-4 form-group">
                    <label class="form-label" for="Direccion">Codigo postal</label>
                    <input type="text" class="form-control form-control-sa" id="rol" name="rol" required />
                    <div class="valid-feedback">Válido.</div>
                    <div class="invalid-feedback">Ingrese una Dirección.</div>
                </div>

               




                <div class="col-md-12 form-group">
                    <div class="containerup">
                        <input type="file"
                               id="input-file"
                               name="input-file"
                               accept="image/*"
                               onchange={handleChange()}
                               hidden />
                        <label class="btn-upload" for="input-file" role="button">
                            Subir logotipo
                        </label>
                        <div class="preview-box"></div>
                    </div>


                    <div class="valid-feedback">Válido.</div>
                    <div class="invalid-feedback">ingrese la contraseña.</div>
                </div>

                <div class="col-md-12 form-group">

                    <button type="submit" class="btn btn-success btn-sm" ng-click="submitForm()" style="width:100% !important">Guardar Cambios</button>

                </div>

               

            </div>


        </form>

        @*<a asp-action="agregarusuario" asp-controller="Usuarios" asp-route-IdUsuario="0" class="btn btn-primary btn-sm">Nuevo Usuario </a>*@




    </div>
</div>

<script>
    const handleChange = () => {
        const fileUploader = document.querySelector('#input-file');
        const getFile = fileUploader.files
        if (getFile.length !== 0) {
            const uploadedFile = getFile[0];
            readFile(uploadedFile);
        }
    }

    const readFile = (uploadedFile) => {
        if (uploadedFile) {
            const reader = new FileReader();
            reader.onload = () => {
                const parent = document.querySelector('.preview-box');
                parent.innerHTML = `<img class="preview-content" src=${reader.result} />`;
            };

            reader.readAsDataURL(uploadedFile);
        }
    };


</script>